:root { 
    --bg-primary: #000; 
    --bg-secondary: #1c1c1e; 
    --text-primary: #fff; 
    --text-secondary: #9ca3af; 
    --border-color: #27272a; 
    --accent-color: #60a5fa; 
    --msg-in: #1c1c1e; 
    --msg-out: #1e3a8a; 
}
.light-mode { 
    --bg-primary: #fff; 
    --bg-secondary: #f3f4f6; 
    --text-primary: #000; 
    --text-secondary: #6b7280; 
    --border-color: #e5e7eb; 
    --accent-color: #3b82f6; 
    --msg-in: #fff; 
    --msg-out: #e0f2fe; 
}

body { font-family: 'Vazirmatn', sans-serif; background-color: var(--bg-primary); color: var(--text-primary); height: 100dvh; overflow: hidden; transition: 0.3s; }
.screen { height: 100%; display: flex; flex-direction: column; }
.scroll-hide::-webkit-scrollbar { display: none; }
.bg-sec { background-color: var(--bg-secondary); }
.pb-safe { padding-bottom: env(safe-area-inset-bottom); }
.pt-safe { padding-top: env(safe-area-inset-top); }

.context-menu { position: fixed; background: var(--bg-secondary); border-radius: 12px; z-index: 500; min-width: 180px; display: none; box-shadow: 0 5px 20px rgba(0,0,0,0.5); border: 1px solid var(--border-color); }
.context-menu button { display: block; width: 100%; text-align: inherit; padding: 12px; border-bottom: 1px solid var(--border-color); color: var(--text-primary); }
.context-menu button:last-child { border-bottom: none; }

#attachMenu { position: absolute; bottom: 65px; left: 10px; background: var(--bg-secondary); border-radius: 12px; padding: 5px; display: none; flex-direction: column; gap: 2px; box-shadow: 0 5px 20px rgba(0,0,0,0.5); z-index: 200; min-width: 160px; border: 1px solid var(--border-color); }
#attachMenu button { padding: 10px; text-align: inherit; display: flex; align-items: center; gap: 10px; border-radius: 8px; color: var(--text-primary); }
#attachMenu button:hover { background: rgba(128,128,128,0.2); }

.chakavak-logo { width: 30px; height: 30px; background: linear-gradient(135deg, #3b82f6, #8b5cf6); mask: url('data:image/svg+xml;utf8,<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>') no-repeat center; -webkit-mask: url('data:image/svg+xml;utf8,<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></svg>') no-repeat center; mask-size: contain; -webkit-mask-size: contain; }

.active-tab { color: var(--accent-color); border-bottom: 2px solid var(--accent-color); }
.recording-pulse { animation: pulse 1s infinite; color: red; }
@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

#chat-bg { position: absolute; inset: 0; z-index: 0; background-image: url('https://web.telegram.org/img/bg_0.png'); background-size: cover; opacity: 0.1; pointer-events: none; }
.light-mode #chat-bg { opacity: 0.05; filter: invert(1); } 
#msgBox { position: relative; z-index: 1; }

/* اضافه کردن به انتهای فایل */
@keyframes blink-red {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(0.9); }
}
.animate-pulse {
    animation: blink-red 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}